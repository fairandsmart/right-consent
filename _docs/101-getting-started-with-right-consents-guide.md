---
title: Getting started with Right Consents
permalink: /docs/getting-started-guide/
excerpt: "Instructions for starting using and integrating Right Consents in existing applications"
header:
  og_image: /assets/images/gettingstarted-overview.jpg
toc: true
menu: true
---

Learn how to start using **[Right Consents](https://right-consents.fairandsmart.io/)** **backoffice** and **API** to define, collect and query consents using a simple HTTP Client : curl

- Understand the different **stages** of consent collect in Right Consents
- Discover the backoffice and define some **consent model elements**
- Use the backoffice assembly tool to try different **consent form layout** until desired result
- Understand **API basic concepts** and ressources
- Use **curl** to make basic API calls for consent collection simple scenario

## Prerequisites

To complete this guide you need :

- Roughly 45 minutes
- Git
- Docker
- Right Consents running
- Curl

## Overview

In this guide you will discover the different stages that are covered by Right Consents in consent management : the definition of consent library elements, the design of different consent collect forms and the integration into existing applications or web sites.

{% include figure image_path="/assets/images/gettingstarted-overview.jpg" alt="Getting Started with Right Consents - Overview" %}

This guide also covers some basic aspects of the API and some basic calls that can to be done by any external application.

## The different stages of consent collection

Consent collection is a more or less complex operation in the fact that it is either a legal part of a data processing but also a software piece that captures user choice at a specific time and holds that data for a relative long time in a standard way. The information generated by that software piece often need to be accessed or disseminated to third part software as user choices could have an impact on many pieces of an information system.

### Stage One : define

The **first stage** is mainly handled by the data controller itself or the data protection officer (dpo) and is mainly an **administrative task**. That stage aims to **define** all the elements that takes part in the consent collection. Those elements are purely declarative but have a specific structure and will be stored with the consent itself for a long time. Right Consents helps to **define, manage and preserve** processings declaration but also of other informations like terms of service, preferences, legal information. Like a CMS, Right Consents will handle consent elements **lifecycle** to ensure the **legal validity** by assuming **auditing** and **versionning** but also by generating some **digital proofs** of any produced content. Then, elements will be accessible throught the API for next stage or for other dissemination goals (processing registry).

### Stage two : design

The **second stage** is to assemble declared elements into specific layout that fits with the final integration goal. For exemple, Terms of Service will be collected at startup of an application or at signup whereas some processing consent could be collected only when a specific service is requested. Some processings could be collected in the website where some other in a mobile application only. Right Consents defines the notion of **Consent Context** that will holds all aspects of an application's pointcut that handles user consent need. Right Consents backoffice propose a **graphical tool** to design Consent Context. At the end you can extract the generated JSON configuration for **integration** in any **external application**.

### Stage three : integrate

The **third stage** is handled by a developer and consist in using predefined Consent Context base configuration for integraton into the target application. As Consent Context contains also specific runtime information like the subject id, integration needs to be dynamic according to the target context. The Consent Context will then be pushed to the API to declare a new **Consent Transaction** that will act as a consent collection workflow. The Consent Transaction will be aslo an entry point that will live during all the consent preservation time, allowing users to retrieve information about consent maybe years after. Integration may also require to query end user choices at some points of an user experience. Once the transaction is committed, specific pieces of informations are generated : some **Consent Records** and a **Consent Receipt**.


## Define consent collection elements


//TODO FROM HERE




First, define the **processings, preferences or terms and conditions** you want to use. The terms and
conditions body supports HTML, but plain text will work just fine.

You will also need to create an **information** model, especially if you intend to use processings.

You can create an **email** model if you want to send a **consent receipt**  to your users. This is
not mandatory. Again, some fields support HTML as well as plain text.

If you are well-versed in CSS, you can play with a **theme** model to customize your form's look'n'feel, otherwise the
default theme will be applied. Even if CSS is a mystery for you, don't hesitate to create a theme simply to register
your own **logo** which will appear in your forms, receipts and emails.

Don't forget to **activate** each model!

### Create an HTML From

The basic use case here, is collecting the consent from users before collecting their data.

We need an HTML form to plug the SDK to it, either you take an existing one from your personal project, or you follow
along with a basic HTML form.

[comment]: <> (TODO link to html form example)

[comment]: <> (- wget on html file located in github => use it throughout the example or)

This HTML form can be served using docker or docker-compose

```bash
$ docker run --name apache -v /path/to/consent-example:/app bitnami/apache:latest -p 1180:1180
```

or

```bash
$ docker-compose up -d
```

Once the docker container up and running, go to this [page](http://localhost:1180/index.html)

### Integrate Javascript SDK in the HTML Form

At this point you have a simple HTML form, with some input elements that can be filled with personal data, for example.

The next step is to connect this form to the SDK and the `ConsentCollector`. It will create a consent
form based on a **subject ID** (basically a phone number, an email address ...), and a **consent context**.

You will need, first, to import the script file in your HTML file like so :

```html
<!-- With consent.js stored locally -->
<script src="/path/to/consent.js"></script>

<!-- With consent.js from Fair&Smart CDN -->
<script src="https://assets.fairandsmart.tech/consent.js"></script>
```


<i class="fa fa-info-circle"></i> More on the SDK configuration and integration [here](/docs/sdk/#balise-script)
{: .notice--info}

Then, write a function that calls the Consent Collector. This function has to declare a
new `FairAndSmart.ConsentCollector` instance and call the collect()
method from the `ConsentCollector` object :

```javascript
 function collect() {

    /** Page is awaiting the response from the consent window: disabling submit button **/
    const submitBtnElement = document.getElementById('submit');
    const formElement = document.getElementById('demo-form');
    const message = document.getElementById('message');
    const subject = document.getElementById('input-email').value;

    submitBtnElement.setAttribute('disabled', 'true');

    /** Collect objet creation */
    const consentCollector = new FairAndSmart.ConsentCollector({
        tokenBrokerEndpoint: 'http://localhost:3001/profile/form',
        consentContext: {
            subject: subject,
            author: subject,
            origin: "WEBFORM",
            confirmation: "NONE",
            language: "en",
            userinfos: {},
            validity: "P6M",
            layout: "layout.001"
        },
        mode: 'window'
    });

    /** Consent collection can begin **/
    consentCollector.collect()
        .then(() => {
            /** Sucess callback : collect is done */
            submitBtnElement.classList.add('hidden');
            formElement.classList.add('hidden');
            message.classList.remove('hidden');
            /** We can check the collect reponse here */

        })
        .catch((err) => {
            /** Error callback, something went wrong. Reset button to retry the consent collect */
            console.error(err);
            submitBtnElement.setAttribute('disabled', 'false');
        })
}
```

<i class="fa fa-info-circle"></i> <b>Notice:</b> The **subject ID** here is retrieved from the email input, it can be another identifier such as a phone number, a unique ID from your platform ...
{: .notice--info}


Finally, create a button in your HTML Form that will call the function ```collect()``` :

```html
<button id="submit" class="submit-btn" onclick="collect()">Send</button>
```

### Test, validate and generate a consent

Once everything is set up, you are ready to test the consent collection.

Go to the following [web page](http://localhost:1180/index.html), fill the form and click on the submit button at the bottom of the page.

A **popup window** will appear with the desired consent form. Submit your preferences, processings and/or terms and conditions of your choice by clicking on the submit button.

Done, you have attached a consent collector to an existing HTML form. Moreover, you have created a consent record that can be accessible from the backoffice.

### Consult collected consents via the back-office

The final step, in order to access consents records created using the form, go to the [GUI / Back Office](http://localhost:4200) under the page **Integration > Search**

Here, you can access the consent records generated by users and filter them by entry and value entry like so :

{% include figure image_path="/assets/images/existing-form-records-search.png" alt="Search consent records - Back office" %}

Then click on search, a list of consent will be displayed on a table.

From here you can export all the consent records generated by clicking on the **export** button :

{% include figure image_path="/assets/images/existing-form-records-export.png" alt="Export consent records - Back office" %}

A .CSV file will be created, containing all the information linked to the user consent record (Record key, Record value, Email Address, ...).
