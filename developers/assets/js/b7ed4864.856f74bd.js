"use strict";(self.webpackChunkapi_doc=self.webpackChunkapi_doc||[]).push([[476],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=o,f=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(f,i(i({ref:t},p),{},{components:n})):a.createElement(f,i({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5725:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const r={},i="Javascript SDK",s={unversionedId:"techdoc/sdk",id:"techdoc/sdk",title:"Javascript SDK",description:"This documentation covers all the features provided in the Javascript SDK : the 'consent.js' file. If you want to learn more about our Right Consents solution, please refer to the appropriate documentation.",source:"@site/docs/04-techdoc/403-sdk.md",sourceDirName:"04-techdoc",slug:"/techdoc/sdk",permalink:"/developers/docs/techdoc/sdk",draft:!1,tags:[],version:"current",sidebarPosition:411,frontMatter:{},sidebar:"docSidebar",previous:{title:"Connecting to the API",permalink:"/developers/docs/api/connecting"}},l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Import Consent.js",id:"import-consentjs",level:2},{value:"Module NPM (recommand\xe9)",id:"module-npm-recommand\xe9",level:3},{value:"Balise Script",id:"balise-script",level:3},{value:"Initialiser Consent.js",id:"initialiser-consentjs",level:2},{value:"Types et interfaces",id:"types-et-interfaces",level:2},{value:"Utilisation",id:"utilisation",level:3},{value:"Interfaces",id:"interfaces",level:3},{value:"Helpers",id:"helpers",level:3},{value:"ModelEntryHelper",id:"modelentryhelper",level:4},{value:"ConsentHelper",id:"consenthelper",level:4},{value:"API Calls",id:"api-calls",level:2},{value:"HTTP Client",id:"http-client",level:2},{value:"Forms",id:"forms",level:2},{value:"ConsentCollector",id:"consentcollector",level:3},{value:"DataCollector",id:"datacollector",level:3},{value:"ConsentFormWrapper",id:"consentformwrapper",level:3}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"javascript-sdk"},"Javascript SDK"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"}," This documentation covers all the features provided in the Javascript SDK : the 'consent.js' file. If you want to learn more about our Right Consents solution, please refer to the appropriate documentation.")),(0,o.kt)("b",null,"Fairandsmart")," provides an opensource typescript library compatible with all browser allowing you to easily integrate all the Right Consent features.",(0,o.kt)("p",null,"This documentation references most classes and methods available within the consent.js typescript library."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"We are assuming here that you have sufficient knowledge of the javascript environment and web development. We are also assuming you are familiar with the terminology of the FairAndSmart Right Consents solution, as well as the tools provided. If this is not the case, please refer to our documentation before continuing."),(0,o.kt)("h2",{id:"import-consentjs"},"Import Consent.js"),(0,o.kt)("p",null,"Import the consent.js file on all webpages where you are using Right Consents features."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"The file must always be imported from the official FairAndSmart asset server or with npm.")),(0,o.kt)("h3",{id:"module-npm-recommand\xe9"},"Module NPM (recommand\xe9)"),(0,o.kt)("p",null,"We also provide the @fairandsmart/consent-manager module in the public npm directory. You can install it in your project with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ npm i @fairandsmart/consent-manager\n")),(0,o.kt)("p",null,"You can then import any component of the SDK with the ",(0,o.kt)("inlineCode",{parentName:"p"},"import")," keyword."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Exemple:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentCollector } from '@fairandsmart/consent-manager';\n\nconst collector = new ConsentCollector();\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"The NPM module provides typings compatible with Typescript. This version allows an optimal and simpler development environment than the Javascript version imported below with the script tag.")),(0,o.kt)("h3",{id:"balise-script"},"Balise Script"),(0,o.kt)("p",null,"We provide the Consent.js file through our official asset server."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://assets.fairandsmart.tech/consent.js"><\/script>\n')),(0,o.kt)("p",null,"When the consent.js file is imported via a script tag, the SDK features are available in the ",(0,o.kt)("inlineCode",{parentName:"p"},"window.FairAndSmart")," global variable of your web page."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Exemple:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const collector = new FairAndSmart.ConsentCollector();\n")),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"The version of Consent.js imported from our asset server contains only the native javascript sources, without typings. If you prefer to develop more complex solutions, please use the npm module.")),(0,o.kt)("h2",{id:"initialiser-consentjs"},"Initialiser Consent.js"),(0,o.kt)("p",null,"Le SDK a besoin d'\xeatre initialis\xe9 avant de pouvoir \xeatre utilis\xe9. Selon la configuration de vos offres et ce que vous voulez effectuer avec Consent.js, vous devrez sp\xe9cifier les diff\xe9rents points d\u2019acc\xe8s aux services FairAndSmart."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Si vous pr\xe9f\xe9rez utiliser Consent.js uniquement pour les types, interfaces et \xe9num\xe9rations mises \xe0 disposition, vous pouvez passer cette \xe9tape.")),(0,o.kt)("p",null,"Avant de pouvoir utiliser les fonctionnalit\xe9s de collecte du SDK, vous devez appeler la m\xe9thode ",(0,o.kt)("inlineCode",{parentName:"p"},"RightConsents.init"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { RightConsents } from '@fairandsmart/consent-manager';\nimport { defaultHttpClient } from '@fairandsmart/consent-manager/http';\n\nRightConsents.init({\n  apiRoot: 'https://consent-manager.fairandsmart.com',\n  catalogRoot: 'https://catalog.fairandsmart.com',\n  httpClient: defaultHttpClient,\n});\n")),(0,o.kt)("p",null,"Cette m\xe9thode prend en param\xe8tre un objet de configurations comportant les champs suivants :"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Champ"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,o.kt)("th",{parentName:"tr",align:"right"},"Valeur par d\xe9faut"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"apiRoot"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Il s\u2019agit du point d\u2019acc\xe8s de votre Consent Manager FairAndSmart. Le SDK utilisera cette URI pour interroger la base de consentement de vos utilisateurs."),(0,o.kt)("td",{parentName:"tr",align:"right"},"\u2018no_endpoint\u2019")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"catalogRoot"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Il s\u2019agit du point d\u2019acc\xe8s du catalogue de donn\xe9e de FairAndSmart. Cette option n\u2019est a sp\xe9cifier que si vous avez souscrit \xe0 l\u2019offre Right Data - permettant de collecter des donn\xe9es utilisateur."),(0,o.kt)("td",{parentName:"tr",align:"right"},"\u2018no_endpoint\u2019")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"httpClient"),(0,o.kt)("td",{parentName:"tr",align:"left"},"Il s\u2019agit d\u2019un client http par lequel tous les appels http du SDK passeront. La fonction doit \xeatre du type RcHttpClient. Vous pouvez choisir d\u2019utiliser le client http fourni par le SDK (defaultHttpClient) ou impl\xe9menter le v\xf4tre."),(0,o.kt)("td",{parentName:"tr",align:"right"},"defaultHttpClient")))),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Cet appel est synchrone et initialise la librairie javascript dans sa globalit\xe9. Pensez \xe0 bien effectuer cette action avant toute autre chose.")),(0,o.kt)("h2",{id:"types-et-interfaces"},"Types et interfaces"),(0,o.kt)("admonition",{type:"info"}," ",(0,o.kt)("b",null,"Only available")," with the npm package within a Typescript environment"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"@fairandsmart/consent-manager")," module contains types and interface definitions in Typescript, as well as helpers to quickly use the Right Consents API with full compatibility."),(0,o.kt)("h3",{id:"utilisation"},"Utilisation"),(0,o.kt)("p",null,"All the components of the library are accessible by importing them from their respective endpoints. The library is organized according to the Right Consents API resources."),(0,o.kt)("p",null,"You can directly import an element from the sub-resource in the import path (recommended)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentContext } from '@fairandsmart/consent-manager/consents';\n\nconst context: ConsentContext = { ... };\n")),(0,o.kt)("p",null,"You can also import each resource into a wrapper containing all its components like this: (not recommended - not very readable)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentsResource } from '@fairandsmart/consent-manager';\n\nconst context: ConsentsResource.ConsentContext = { ... };\n")),(0,o.kt)("h3",{id:"interfaces"},"Interfaces"),(0,o.kt)("p",null,"In TypeScript, an interface is a construct that determines the signature of an object. Unlike classes, they do not need to be instantiated with the new keyword and can be assigned to javascript objects at any time. They allow a better readability of the code and ensure its compatibility."),(0,o.kt)("p",null,"Many interfaces are available in ",(0,o.kt)("inlineCode",{parentName:"p"},"@fairandsmart/consent-manager")," and if you use TypeScript, when you use a method of the library, you will have access to the variety of definitions available to you."),(0,o.kt)("h3",{id:"helpers"},"Helpers"),(0,o.kt)("p",null,"Helpers are static classes that allow us to manipulate our objects and data in different ways."),(0,o.kt)("h4",{id:"modelentryhelper"},"ModelEntryHelper"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"getActiveVersionIdentifier"),"\nThis method takes as parameter a template (of consent, preference, email, etc.) and returns the unique identifier of the version with the ",(0,o.kt)("inlineCode",{parentName:"p"},"ACTIVE")," status."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ModelEntryHelper } from '@fairandsmart/consent-manager/models';\n\nconst model: Processing = getProcessingModel(); // R\xe9cup\xe9ration d'un mod\xe8le - pour l'exemple\nconst activeVersionId: string = ModelEntryHelper.getActiveVersionIdentifier(model);\n\nconsole.log(activeVersionId);\n// => \"processing/processing.001/s3riAl\"\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"getActiveVersion"),"\nThis method retrieves the version of the model passed in the parameter with the ",(0,o.kt)("inlineCode",{parentName:"p"},"ACTIVE")," status. Only one version can have this status at a time per model."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ModelEntryHelper } from '@fairandsmart/consent-manager/models';\n\nconst model: Processing = getActiveProcessingModel(); // R\xe9cup\xe9ration d'un mod\xe8le - pour l'exemple\nconst activeVersion: ModelVersionDtoLight<Processing> = ModelEntryHelper.getActiveVersion(model);\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"hasActiveVersion"),"\nThis method returns ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," if there is a version with the status ",(0,o.kt)("inlineCode",{parentName:"p"},"ACTIVE")," for the model passed in parameter."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ModelEntryHelper } from '@fairandsmart/consent-manager/models';\n\nconst model: Processing = getProcessingModel(); // R\xe9cup\xe9ration d'un mod\xe8le - pour l'exemple\nModelEntryHelper.hasActiveVersion(model);\n// => true\n")),(0,o.kt)("h4",{id:"consenthelper"},"ConsentHelper"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"generateContextFromRecord"),"\nThis method takes as parameters a model, a record and a language. It then returns a new context that is valid and compatible with the record passed in parameter. This allows to quickly regenerate a new collection context for a user who has already given a consent in the past."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentHelper} from '@fairandsmart/consent-manager/consents';\n\nconst model: Processing = getProcessingModel(); // R\xe9cup\xe9ration d'un mod\xe8le - pour l'exemple\nconst record: RecordDto = getRecordForModel(model); // R\xe9cup\xe9ration du record pour le mod\xe8le\n\nconst newContext: ConsentContext = ConsentHelper.generateContextFromRecord(model, record, 'fr');\n")),(0,o.kt)("h2",{id:"api-calls"},"API Calls"),(0,o.kt)("admonition",{type:"info"}," ",(0,o.kt)("b",null,"Note:")," In order to use the functionalities described in this page, it is imperative to have initialized the library as indicated in the section Initialize Consent.js"),(0,o.kt)("p",null,"Consent.js implements a library of methods to interface with the Right Consents API."),(0,o.kt)("p",null,"These methods define parameters in input and output of each endpoint, and use an HTTP request function."),(0,o.kt)("h2",{id:"http-client"},"HTTP Client"),(0,o.kt)("p",null,"In order for the API call methods to work properly, an HTTP Client must be provided to the library. There is one by default, but it may not meet all your needs."),(0,o.kt)("p",null,"The HTTP client must correspond to an object of type RcHttpClient, available from ",(0,o.kt)("inlineCode",{parentName:"p"},"@fairandsmart/consent-manager/http")),(0,o.kt)("p",null,"Here is an example of creating a compatible HTTP client, followed by the use of an API call method."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { RightConsents, RcHttpClientConfig } from '@fairandsmart/consent-manager';\n\n// Cr\xe9ation du client HTTP.\nfunction myCustomHttpClient(config: RcHttpClientConfig): Observable<ModelEntryDto> {\n    // ajouter une cl\xe9 API, un workflow oAuth, etc., puis effectuer l'appel HTTP.\n    return fromFetch(config.url, ...);\n}\n\n// Initialisation de la librairie RightConsents\nRightConsents.init({\n  apiRoot: 'https://consent-manager.fairandsmart.com',\n  catalogRoot: 'https://catalog.fairandsmart.com',\n  httpClient: myCustomHttpClient,\n});\n\n\n// Appel \xe0 l'API avec un observable\n\nModelsResource.getEntry(entryId).subscribe((modelEntry: ModelEntryDto) => {\n    ...  \n});\n\n// ... ou avec une promesse, avec la fonction .toPromise();\n\nconst modelEntry: ModelEntryDto = await ModelsResource.getEntry(entryId).toPromise();\n")),(0,o.kt)("p",null,"For more details on the available methods, please see the list ",(0,o.kt)("a",{href:"https://fairandsmart.atlassian.net/wiki/spaces/BDC/pages/2268135526/Appels+l+API",target:"_blank"},"here")),(0,o.kt)("h2",{id:"forms"},"Forms"),(0,o.kt)("p",null,"Consent.js provides complete data consent collection scenario integrations in Javascript, compatible with any web or mobile browser."),(0,o.kt)("h3",{id:"consentcollector"},"ConsentCollector"),(0,o.kt)("p",null,"This scenario allows the collection of a set of processing and preferences in an existing workflow."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With Consent.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<html>\n  <head>\n    <script src=\"https://assets.fairandsmart.tech/consent.js\"><\/script>\n  </head>\n  <body>\n    <button onclick=\"collect()\">Collecter le consentement</button>\n    <script>\n      function collect() {\n         const consentCollector = new FairAndSmart.ConsentCollector({\n            tokenBrokerEndpoint: 'https://proxy-consent.yourdomain.com/profile/form', // Il s'agit de l'URL \xe0 partir de laquelle vous allez g\xe9n\xe9rer un token de transaction de consentement.\n            consentContext: {\n                subject: 'YOUR USER ID',  // L'identifiant unique de l'utilisateur. A vous d'impl\xe9menter une solution authentifi\xe9e si n\xe9c\xe9ssaire.\n                author: 'YOUR USER ID',   // L'identifiant unique de l'utilisateur. A vous d'impl\xe9menter une solution authentifi\xe9e si n\xe9c\xe9ssaire.\n                origin: \"WEBFORM\",        // WEBFORM indique que l'utilisateur aura interagit directement avec le formulaire\n                confirmation: \"NONE\",     // Si le workflow doit demander une confirmation (email, sms, etc.) pour la validation du consentement.\n                language: \"fr\",           // Le langage de collecte\n                userinfos: {},            // Des informations suppl\xe9mentaires que vous voulez envoyer \xe0 propos de l'utilisateur\n                validity: \"P6M\",          // P\xe9riode de validit\xe9 au format DateInterval\n                layout: \"layout.001\"      // Il s'agit de l'identifiant d'un Formulaire que vous avez d\xe9fini dans notre backoffice\n            },\n            mode: 'window'                // Le mode d'affichage de la fen\xeatre de consement. 'window' ou 'iframe'.\n        });\n\n        consentCollector.collect()        // Lance la collecte du consentement (asynchrone).\n                        .then(() => {\n                          // La collecte s'est bien pass\xe9e et est termin\xe9e.\n                        })\n                        .catch((err) => {\n                          // g\xe9rer les erreurs.\n                        });\n      }\n    <\/script>\n  </body>\n</html>\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With @fairandsmart/consent-manager")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentCollector } from '@fairandsmart/consent-manager';\n\nfunction collect() {\n    const consentCollector = new ConsentCollector({\n      tokenBrokerEndpoint: 'https://proxy-consent.yourdomain.com/profile/form', // Il s'agit de l'URL \xe0 partir de laquelle vous allez g\xe9n\xe9rer un token de transaction de consentement.\n      consentContext: {\n          subject: 'YOUR USER ID',  // L'identifiant unique de l'utilisateur. A vous d'impl\xe9menter une solution authentifi\xe9e si n\xe9c\xe9ssaire.\n          author: 'YOUR USER ID',   // L'identifiant unique de l'utilisateur. A vous d'impl\xe9menter une solution authentifi\xe9e si n\xe9c\xe9ssaire.\n          origin: \"WEBFORM\",        // WEBFORM indique que l'utilisateur aura interagit directement avec le formulaire\n          confirmation: \"NONE\",     // Si le workflow doit demander une confirmation (email, sms, etc.) pour la validation du consentement.\n          language: \"fr\",           // Le langage de collecte\n          userinfos: {},            // Des informations suppl\xe9mentaires que vous voulez envoyer \xe0 propos de l'utilisateur\n          validity: \"P6M\",          // P\xe9riode de validit\xe9 au format DateInterval\n          layout: \"layout.001\"      // Il s'agit de l'identifiant d'un Formulaire que vous avez d\xe9fini dans notre backoffice\n      },\n      mode: 'window'                // Le mode d'affichage de la fen\xeatre de consement. 'window' ou 'iframe'.\n  });\n\n  consentCollector.collect()        // Lance la collecte du consentement (asynchrone).\n                  .then(() => {\n                    // La collecte s'est bien pass\xe9e et est termin\xe9e.\n                  })\n                  .catch((err) => {\n                    // g\xe9rer les erreurs.\n                  });\n}\n")),(0,o.kt)("h3",{id:"datacollector"},"DataCollector"),(0,o.kt)("admonition",{type:"info"}," ",(0,o.kt)("b",null,"Note:")," Requires a subscription to the Right Data offer"),(0,o.kt)("p",null,"This scenario allows the collection of encrypted data from the user. From a schema configuration (defined in our backoffice in Right Data > Schemas), a data form will be generated and replace a tag in your HTML page."),(0,o.kt)("p",null,"Once the user has filled in the data, and you have performed the required processing, the data will be encrypted and sent to our secure servers. You will be able to consult them from our backoffice and perform additional operations according to your offers."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With Consent.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<html>\n  <head>\n    <script src=\"https://assets.fairandsmart.tech/consent.js\"><\/script>\n  </head>\n  <body>\n    <form id=\"myform\"></form>\n    <script>\n      const dataCollector = new FairAndSmart.DataCollector({\n        dataCreationEndpoint: 'http://proxy-fs.domain.com/data/form',  // L'URL o\xf9 seront envoy\xe9es les donn\xe9es. Voir la section \"proxy\" pour plus d'informations.\n        elementId: 'my-form', // L'id de la balise HTML \xe0 remplacer\n        schemaName: 'Contact', // Le nom du sch\xe9ma \xe0 utiliser (voir backoffice)\n        schemaPrefix: 'sncfreseau', // Le pr\xe9fixe du sch\xe9ma (voir backoffice)\n        userFieldId: 'e58d6366-4608-4d87-a1f5-da0826e13158', // L'identifiant (issu du sch\xe9ma) du champ \xe0 utiliser en tant qu'identifiant de l'utilisateur\n        dataSentTemplate: `<strong>Vos informations ont bien \xe9t\xe9 envoy\xe9e avec votre consentement !</strong>` // Le template HTML qui remplacement le formulaire une fois celui-ci envoy\xe9.\n      });\n\n      dataCollector.render();   // Remplace la balise <form> avec le formulaire g\xe9n\xe9r\xe9.\n\n      /** Ici on utilise la puissance de rxjs pour suivre l'avancement de la collecte des donn\xe9es. */\n      dataCollector.onSend().pipe(\n        mergeMap((dataStore) => {\n          /** Si le code ici s'exectute, c'est que l'utilisateur a cliqu\xe9 sur \"Envoyer\" et qu'un DataStore a \xe9t\xe9 cr\xe9\xe9.\n           *  Effectuez les actions que vous souhaitez avant d'envoyer les donn\xe9es sur nos serveurs.\n           */\n           return dataCollector.pushData();\n        })\n      ).subscribe({\n        next: () => { /** Callback de succ\xe8s : les donn\xe9es ont bien \xe9t\xe9 envoy\xe9es */ },\n        error: (err) => { /** Callback d'erreur : g\xe9rez l'erreur ici */ };\n      });\n    <\/script>\n  </body>\n</html>\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With @fairandsmart/consent-manager")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { DataCollector} from '@fairandsmart/consent-manager';\n\nconst dataCollector = new DataCollector({\n  dataCreationEndpoint: 'http://proxy-fs.domain.com/data/form',  // L'URL o\xf9 seront envoy\xe9es les donn\xe9es. Voir la section \"proxy\" pour plus d'informations.\n  elementId: 'my-form', // L'id de la balise HTML \xe0 remplacer\n  schemaName: 'Contact', // Le nom du sch\xe9ma \xe0 utiliser (voir backoffice)\n  schemaPrefix: 'sncfreseau', // Le pr\xe9fixe du sch\xe9ma (voir backoffice)\n  userFieldId: 'e58d6366-4608-4d87-a1f5-da0826e13158', // L'identifiant (issu du sch\xe9ma) du champ \xe0 utiliser en tant qu'identifiant de l'utilisateur\n  dataSentTemplate: `<strong>Vos informations ont bien \xe9t\xe9 envoy\xe9e avec votre consentement !</strong>` // Le template HTML qui remplacement le formulaire une fois celui-ci envoy\xe9.\n});\n\ndataCollector.render();   // Remplace la balise <form> avec le formulaire g\xe9n\xe9r\xe9.\n\n/** Ici on utilise la puissance de rxjs pour suivre l'avancement de la collecte des donn\xe9es. */\ndataCollector.onSend().pipe(\n  mergeMap((dataStore) => {\n    /** Si le code ici s'exectute, c'est que l'utilisateur a cliqu\xe9 sur \"Envoyer\" et qu'un DataStore a \xe9t\xe9 cr\xe9\xe9.\n      *  Effectuez les actions que vous souhaitez avant d'envoyer les donn\xe9es sur nos serveurs.\n      */\n      return dataCollector.pushData();\n  })\n).subscribe({\n  next: () => { /** Callback de succ\xe8s : les donn\xe9es ont bien \xe9t\xe9 envoy\xe9es */ },\n  error: (err) => { /** Callback d'erreur : g\xe9rez l'erreur ici */ };\n});\n")),(0,o.kt)("h3",{id:"consentformwrapper"},"ConsentFormWrapper"),(0,o.kt)("admonition",{type:"info"}," ",(0,o.kt)("b",null,"Note:")," Requires a subscription to the Right Data offer"))}d.isMDXComponent=!0}}]);
