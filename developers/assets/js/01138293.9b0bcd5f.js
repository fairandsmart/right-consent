"use strict";(self.webpackChunkapi_doc=self.webpackChunkapi_doc||[]).push([[93],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(n),h=o,u=m["".concat(l,".").concat(h)]||m[h]||d[h]||r;return n?a.createElement(u,i(i({ref:t},p),{},{components:n})):a.createElement(u,i({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6660:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const r={},i="Javascript SDK",s={unversionedId:"techdoc/sdk",id:"techdoc/sdk",title:"Javascript SDK",description:"This documentation covers all the features provided in the Javascript SDK: the 'consent.js' file.",source:"@site/docs/04-techdoc/403-sdk.md",sourceDirName:"04-techdoc",slug:"/techdoc/sdk",permalink:"/developers/docs/techdoc/sdk",draft:!1,tags:[],version:"current",sidebarPosition:403,frontMatter:{},sidebar:"docSidebar",previous:{title:"Connecting to the API",permalink:"/developers/docs/techdoc/connecting"},next:{title:"Swagger",permalink:"/developers/docs/techdoc/swagger"}},l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Import Consent.js",id:"import-consentjs",level:2},{value:"NPM module (recommended)",id:"npm-module-recommended",level:3},{value:"Script tag",id:"script-tag",level:3},{value:"Initialize Consent.js",id:"initialize-consentjs",level:2},{value:"Types and interfaces",id:"types-and-interfaces",level:2},{value:"Usage",id:"usage",level:3},{value:"Interfaces",id:"interfaces",level:3},{value:"Helpers",id:"helpers",level:3},{value:"ModelEntryHelper",id:"modelentryhelper",level:4},{value:"ConsentHelper",id:"consenthelper",level:4},{value:"API Calls",id:"api-calls",level:2},{value:"HTTP Client",id:"http-client",level:2},{value:"Forms",id:"forms",level:2},{value:"ConsentCollector",id:"consentcollector",level:3},{value:"DataCollector",id:"datacollector",level:3},{value:"ConsentFormWrapper",id:"consentformwrapper",level:3}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"javascript-sdk"},"Javascript SDK"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"This documentation covers all the features provided in the Javascript SDK: the 'consent.js' file.\nIf you want to learn more about our Right Consents solution, please refer to the appropriate documentation.")),(0,o.kt)("b",null,"Fairandsmart")," provides an opensource typescript library compatible with all browser allowing you to easily integrate all the Right Consent features.",(0,o.kt)("p",null,"This documentation references most classes and methods available within the consent.js typescript library."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"We are assuming here that you have sufficient knowledge of the javascript environment and web development.\nWe are also assuming you are familiar with the terminology of the FairAndSmart Right Consents solution, as well as the tools provided.\nIf this is not the case, please refer to our documentation before continuing."),(0,o.kt)("h2",{id:"import-consentjs"},"Import Consent.js"),(0,o.kt)("p",null,"Import the consent.js file on all webpages where you are using Right Consents features."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"The file must always be imported from the official FairAndSmart asset server or with npm.")),(0,o.kt)("h3",{id:"npm-module-recommended"},"NPM module (recommended)"),(0,o.kt)("p",null,"We also provide the @fairandsmart/consent-manager module in the public npm directory.\nYou can install it in your project with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ npm i @fairandsmart/consent-manager\n")),(0,o.kt)("p",null,"You can then import any component of the SDK with the ",(0,o.kt)("inlineCode",{parentName:"p"},"import")," keyword."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentCollector } from '@fairandsmart/consent-manager';\n\nconst collector = new ConsentCollector();\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"The NPM module provides typings compatible with Typescript.\nThis version allows an optimal and simpler development environment than the Javascript version imported below with the script tag.")),(0,o.kt)("h3",{id:"script-tag"},"Script tag"),(0,o.kt)("p",null,"We provide the Consent.js file through our official asset server."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://assets.fairandsmart.tech/consent.js"><\/script>\n')),(0,o.kt)("p",null,"When the consent.js file is imported via a script tag, the SDK features are available in the ",(0,o.kt)("inlineCode",{parentName:"p"},"window.FairAndSmart")," global variable of your web page."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"Example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const collector = new FairAndSmart.ConsentCollector();\n")),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"The version of Consent.js imported from our asset server contains only the native javascript sources, without typings.\nIf you prefer to develop more complex solutions, please use the npm module.")),(0,o.kt)("h2",{id:"initialize-consentjs"},"Initialize Consent.js"),(0,o.kt)("p",null,"The SDK needs to be initialized before being used.\nDepending on your offers configuration and on what you wish to achieve with Consent.js, you will need to specify the various access points to FairAndSmart services."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"If you only wish to use Consent.js for its included types, interfaces and enumerations, you can skip this step.")),(0,o.kt)("p",null,"Before using the collection functionalities of the SDK, you must call the ",(0,o.kt)("inlineCode",{parentName:"p"},"RightConsents.init")," method:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { RightConsents } from '@fairandsmart/consent-manager';\nimport { defaultHttpClient } from '@fairandsmart/consent-manager/http';\n\nRightConsents.init({\n  apiRoot: 'https://consent-manager.fairandsmart.com',\n  catalogRoot: 'https://catalog.fairandsmart.com',\n  httpClient: defaultHttpClient,\n});\n")),(0,o.kt)("p",null,"This method takes as parameter a configuration object with the following fields:"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:"left"},"Field"),(0,o.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,o.kt)("th",{parentName:"tr",align:"center"},"Default value"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"apiRoot"),(0,o.kt)("td",{parentName:"tr",align:"left"},"The access point to your FairAndSmart Consent Manager. The SDK will use this URI to interrogate your user consent database."),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u2018no_endpoint\u2019")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"catalogRoot"),(0,o.kt)("td",{parentName:"tr",align:"left"},"The access point to your FairAndSmart data catalog. This option needs to be specified only if you subscribed to the Right Data offer - allowing you to collect user data."),(0,o.kt)("td",{parentName:"tr",align:"center"},"\u2018no_endpoint\u2019")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:"left"},"httpClient"),(0,o.kt)("td",{parentName:"tr",align:"left"},"The HTTP client through which all the SDK calls will transit. The function must be of type RcHttpClient. You may choose to use the HTTP client of the SDK (defaultHttpClient) or implement yours."),(0,o.kt)("td",{parentName:"tr",align:"center"},"defaultHttpClient")))),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"This call is synchronous and initializes the Javascript library in its entirety.\nBe careful to execute this action before anything else.")),(0,o.kt)("h2",{id:"types-and-interfaces"},"Types and interfaces"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("b",null,"Only available")," with the npm package within a Typescript environment."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"@fairandsmart/consent-manager")," module contains types and interface definitions in Typescript, as well as helpers to quickly use the Right Consents API with full compatibility."),(0,o.kt)("h3",{id:"usage"},"Usage"),(0,o.kt)("p",null,"All the components of the library are accessible by importing them from their respective endpoints.\nThe library is organized according to the Right Consents API resources."),(0,o.kt)("p",null,"You can directly import an element from the sub-resource in the import path (recommended)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentContext } from '@fairandsmart/consent-manager/consents';\n\nconst context: ConsentContext = { ... };\n")),(0,o.kt)("p",null,"You can also import each resource into a wrapper containing all its components like this: (not recommended - not very readable)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentsResource } from '@fairandsmart/consent-manager';\n\nconst context: ConsentsResource.ConsentContext = { ... };\n")),(0,o.kt)("h3",{id:"interfaces"},"Interfaces"),(0,o.kt)("p",null,"In TypeScript, an interface is a construct that determines the signature of an object.\nUnlike classes, they do not need to be instantiated with the new keyword and can be assigned to javascript objects at any time.\nThey allow a better readability of the code and ensure its compatibility."),(0,o.kt)("p",null,"Many interfaces are available in ",(0,o.kt)("inlineCode",{parentName:"p"},"@fairandsmart/consent-manager")," and if you use TypeScript, when you use a method of the library, you will have access to the variety of definitions available to you."),(0,o.kt)("h3",{id:"helpers"},"Helpers"),(0,o.kt)("p",null,"Helpers are static classes that allow us to manipulate our objects and data in different ways."),(0,o.kt)("h4",{id:"modelentryhelper"},"ModelEntryHelper"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"getActiveVersionIdentifier"),"\nThis method takes as parameter a template (of consent, preference, email...) and returns the unique identifier of the version with the ",(0,o.kt)("inlineCode",{parentName:"p"},"ACTIVE")," status."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ModelEntryHelper } from '@fairandsmart/consent-manager/models';\n\nconst model: Processing = getProcessingModel(); // Model recuperation (example)\nconst activeVersionId: string = ModelEntryHelper.getActiveVersionIdentifier(model);\n\nconsole.log(activeVersionId);\n// => \"processing/processing.001/s3riAl\"\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"getActiveVersion"),"\nThis method retrieves the version of the model passed in the parameter with the ",(0,o.kt)("inlineCode",{parentName:"p"},"ACTIVE")," status.\nOnly one version can have this status at a time per model."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ModelEntryHelper } from '@fairandsmart/consent-manager/models';\n\nconst model: Processing = getActiveProcessingModel(); // Model recuperation (example)\nconst activeVersion: ModelVersionDtoLight<Processing> = ModelEntryHelper.getActiveVersion(model);\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"hasActiveVersion"),"\nThis method returns ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," if there is a version with the status ",(0,o.kt)("inlineCode",{parentName:"p"},"ACTIVE")," for the model passed in parameter."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ModelEntryHelper } from '@fairandsmart/consent-manager/models';\n\nconst model: Processing = getProcessingModel(); // Model recuperation (example)\nModelEntryHelper.hasActiveVersion(model);\n// => true\n")),(0,o.kt)("h4",{id:"consenthelper"},"ConsentHelper"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"generateContextFromRecord"),"\nThis method takes as parameters a model, a record and a language.\nIt then returns a new context that is valid and compatible with the record passed as parameter.\nThis allows to quickly regenerate a new collection context for a user who has already given a consent in the past."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentHelper} from '@fairandsmart/consent-manager/consents';\n\nconst model: Processing = getProcessingModel(); // Model recuperation (example)\nconst record: RecordDto = getRecordForModel(model); // Model's record recuperation\n\nconst newContext: ConsentContext = ConsentHelper.generateContextFromRecord(model, record, 'fr');\n")),(0,o.kt)("h2",{id:"api-calls"},"API Calls"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("b",null,"Note:")," In order to use the functionalities described in this page, it is imperative to have initialized the library as indicated in the section Initialize Consent.js."),(0,o.kt)("p",null,"Consent.js implements a library of methods to interface with the Right Consents API."),(0,o.kt)("p",null,"These methods define parameters in input and output of each endpoint, and use an HTTP request function."),(0,o.kt)("h2",{id:"http-client"},"HTTP Client"),(0,o.kt)("p",null,"In order for the API call methods to work properly, an HTTP Client must be provided to the library.\nThere is one by default, but it may not meet all your needs."),(0,o.kt)("p",null,"The HTTP client must correspond to an object of type RcHttpClient, available from ",(0,o.kt)("inlineCode",{parentName:"p"},"@fairandsmart/consent-manager/http")),(0,o.kt)("p",null,"Here is an example of creating a compatible HTTP client, followed by the use of an API call method."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { RightConsents, RcHttpClientConfig } from '@fairandsmart/consent-manager';\n\n// HTTP client creation\nfunction myCustomHttpClient(config: RcHttpClientConfig): Observable<ModelEntryDto> {\n    // Add an API key, an oAuth workflow, etc - then make the HTTP call.\n    return fromFetch(config.url, ...);\n}\n\n// RightConsents library initialization\nRightConsents.init({\n  apiRoot: 'https://consent-manager.fairandsmart.com',\n  catalogRoot: 'https://catalog.fairandsmart.com',\n  httpClient: myCustomHttpClient,\n});\n\n// API call with an observable...\n\nModelsResource.getEntry(entryId).subscribe((modelEntry: ModelEntryDto) => {\n    ...  \n});\n\n// ... or with a promise, using .toPromise()\n\nconst modelEntry: ModelEntryDto = await ModelsResource.getEntry(entryId).toPromise();\n")),(0,o.kt)("p",null,"For more details on the available methods, please see the list ",(0,o.kt)("a",{parentName:"p",href:"https://fairandsmart.atlassian.net/wiki/spaces/BDC/pages/2268135526/Appels+l+API"},"here"),"."),(0,o.kt)("h2",{id:"forms"},"Forms"),(0,o.kt)("p",null,"Consent.js provides complete data consent collection scenario integrations in Javascript, compatible with any web or mobile browser."),(0,o.kt)("h3",{id:"consentcollector"},"ConsentCollector"),(0,o.kt)("p",null,"This scenario allows the collection of a set of processing and preferences in an existing workflow."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With Consent.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<html>\n  <head>\n    <script src="https://assets.fairandsmart.tech/consent.js"><\/script>\n  </head>\n  <body>\n    <button onclick="collect()">Collect consent</button>\n    <script>\n      function collect() {\n         const consentCollector = new FairAndSmart.ConsentCollector({\n            tokenBrokerEndpoint: \'https://proxy-consent.yourdomain.com/profile/form\', // This is the URL from which you will generate a consent transaction token.\n            consentContext: {\n                subject: \'YOUR USER ID\',  // The unique user identifier. Implementing an authenticated solution is up to you, if necessary.\n                author: \'YOUR USER ID\',   // In this case, the unique user identifier.\n                origin: "WEBFORM",        // WEBFORM means that the user is directly interacting with an online form to submit their consent.\n                confirmation: "NONE",     // The confirmation method (none, email, sms...) to use to validate the consent submission.\n                language: "en",           // The collection language.\n                userinfos: {},            // Additional user information that you wish to share.\n                validity: "P6M",          // Validity period (in the DateInterval format).\n                layout: "layout.001"      // The identifying key of the Layout model that you designed in the backoffice.\n            },\n            mode: \'window\'                // The consent window display mode (\'window\' or \'iframe\').\n        });\n\n        consentCollector.collect()        // Starts the consent collection process (asynchronous).\n                        .then(() => {\n                            // The process worked fine and is finished.\n                        })\n                        .catch((err) => {\n                            // Handle any error.\n                        });\n      }\n    <\/script>\n  </body>\n</html>\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With @fairandsmart/consent-manager")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { ConsentCollector } from '@fairandsmart/consent-manager';\n\nfunction collect() {\n    const consentCollector = new ConsentCollector({\n      tokenBrokerEndpoint: 'https://proxy-consent.yourdomain.com/profile/form', // This is the URL from which you will generate a consent transaction token.\n      consentContext: {\n          subject: 'YOUR USER ID',  // The unique user identifier. Implementing an authenticated solution is up to you, if necessary.\n          author: 'YOUR USER ID',   // In this case, the unique user identifier.\n          origin: \"WEBFORM\",        // WEBFORM means that the user is directly interacting with an online form to submit their consent.\n          confirmation: \"NONE\",     // The confirmation method (none, email, sms...) to use to validate the consent submission.\n          language: \"en\",           // The collection language.\n          userinfos: {},            // Additional user information that you wish to share.\n          validity: \"P6M\",          // Validity period (in the DateInterval format).\n          layout: \"layout.001\"      // The identifying key of the Layout model that you designed in the backoffice.\n      },\n      mode: 'window'                // The consent window display mode ('window' or 'iframe').\n  });\n\n  consentCollector.collect()        // Starts the consent collection process (asynchronous).\n                  .then(() => {\n                      // The process worked fine and is finished.\n                  })\n                  .catch((err) => {\n                      // Handle any error.\n                  });\n}\n")),(0,o.kt)("h3",{id:"datacollector"},"DataCollector"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("b",null,"Note:")," Requires a subscription to the Right Data offer."),(0,o.kt)("p",null,"This scenario allows the collection of encrypted data from the user.\nFrom a schema configuration (defined in our backoffice in Right Data > Schemas), a data form will be generated and replace a tag in your HTML page."),(0,o.kt)("p",null,"Once the user has filled in the data, and you have performed the required processing, the data will be encrypted and sent to our secure servers.\nYou will be able to consult them from our backoffice and perform additional operations according to your offers."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With Consent.js")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<html>\n  <head>\n    <script src=\"https://assets.fairandsmart.tech/consent.js\"><\/script>\n  </head>\n  <body>\n    <form id=\"myform\"></form>\n    <script>\n      const dataCollector = new FairAndSmart.DataCollector({\n        dataCreationEndpoint: 'http://proxy-fs.domain.com/data/form',  // The URL to which the data will be sent (see the \"proxy\" section for more information)\n        elementId: 'my-form', // The identifier of the HTML tag to replace\n        schemaName: 'Contact', // The name of the schema to use (see backoffice)\n        schemaPrefix: 'mycompany', // The schema prefix (see backoffice)\n        userFieldId: 'e58d6366-4608-4d87-a1f5-da0826e13158', // The identifier (from the schema) of the field to use as identifier for the user\n        dataSentTemplate: `<strong>Vos informations ont bien \xe9t\xe9 envoy\xe9e avec votre consentement !</strong>` // The HTML template which will replace the form once it has been submitted\n      });\n\n      dataCollector.render();   // Replace the <form> tag with the generated form.\n\n      /** Use the power of rxjs to follow the progression of the data collection. */\n      dataCollector.onSend().pipe(\n        mergeMap((dataStore) => {\n          /** If this code is executed, it means that the user clicked on \"Send\" and that a DataStore has been created.\n           *  Do all the actions that you want here, before sending the data to our servers.\n           */\n          return dataCollector.pushData();\n        })\n      ).subscribe({\n        next: () => { /** Success callback (the data have been sent) */ },\n        error: (err) => { /** Error callback */ },\n      });\n    <\/script>\n  </body>\n</html>\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"With @fairandsmart/consent-manager")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { DataCollector} from '@fairandsmart/consent-manager';\n\nconst dataCollector = new DataCollector({\n  dataCreationEndpoint: 'http://proxy-fs.domain.com/data/form',  // The URL to which the data will be sent (see the \"proxy\" section for more information)\n  elementId: 'my-form', // L'id de la balise HTML \xe0 remplacer\n  schemaName: 'Contact', // The name of the schema to use (see backoffice)\n  schemaPrefix: 'mycompany', // The schema prefix (see backoffice)\n  userFieldId: 'e58d6366-4608-4d87-a1f5-da0826e13158', // The identifier (from the schema) of the field to use as identifier for the user\n  dataSentTemplate: `<strong>Vos informations ont bien \xe9t\xe9 envoy\xe9e avec votre consentement !</strong>` // The HTML template which will replace the form once it has been submitted\n});\n\ndataCollector.render();   // Replace the <form> tag with the generated form.\n\n/** Use the power of rxjs to follow the progression of the data collection. */\ndataCollector.onSend().pipe(\n  mergeMap((dataStore) => {\n      /** If this code is executed, it means that the user clicked on \"Send\" and that a DataStore has been created.\n       *  Do all the actions that you want here, before sending the data to our servers.\n       */\n      return dataCollector.pushData();\n  })\n).subscribe({\n  next: () => { /** Success callback (the data have been sent) */ },\n  error: (err) => { /** Error callback */ },\n});\n")),(0,o.kt)("h3",{id:"consentformwrapper"},"ConsentFormWrapper"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("b",null,"Note:")," Requires a subscription to the Right Data offer."))}d.isMDXComponent=!0}}]);